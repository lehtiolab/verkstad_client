(function(e){function t(t){for(var s,i,o=t[0],c=t[1],l=t[2],d=0,m=[];d<o.length;d++)i=o[d],n[i]&&m.push(n[i][0]),n[i]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(e[s]=c[s]);u&&u(t);while(m.length)m.shift()();return r.push.apply(r,l||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],s=!0,o=1;o<a.length;o++){var c=a[o];0!==n[c]&&(s=!1)}s&&(r.splice(t--,1),e=i(i.s=a[0]))}return e}var s={},n={app:0},r=[];function i(t){if(s[t])return s[t].exports;var a=s[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=s,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(a,s,function(t){return e[t]}.bind(null,s));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/verkstad/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var u=c;r.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"0224":function(e,t,a){"use strict";var s=a("a491"),n=a.n(s);n.a},"034f":function(e,t,a){"use strict";var s=a("64a9"),n=a.n(s);n.a},"06e8":function(e,t,a){},"07a4":function(e,t,a){"use strict";var s=a("f499"),n=a.n(s),r=(a("cadf"),a("551c"),a("097d"),a("2b0e")),i=a("2f62");r["a"].use(i["a"]),t["a"]=new i["a"].Store({strict:!0,state:{user:JSON.parse(localStorage.getItem("user"))||null,token:localStorage.getItem("token")||null},mutations:{setUser:function(e,t){e.user=t.user,e.token=t.token,e.token?(localStorage.setItem("token",e.token),localStorage.setItem("user",n()(e.user))):(localStorage.removeItem("token"),localStorage.removeItem("user"))}},actions:{setUser:function(e,t){var a=e.commit;a("setUser",t)},logout:function(e){var t=e.commit;t("setUser",{user:null,token:null})}}})},"2fcd":function(e,t,a){"use strict";var s=a("7c31"),n=a.n(s);n.a},"3bc1":function(e,t,a){"use strict";var s=a("d31f"),n=a.n(s);n.a},"3f4a":function(e,t,a){"use strict";a("cadf"),a("551c"),a("097d");var s=a("bc3a"),n=a.n(s),r=a("07a4");t["a"]=function(){return n.a.create({baseURL:"https://mozzarella.scilifelab.se/verkstad_api/",headers:{Authorization:"Bearer ".concat(r["a"].state.token)}})}},"3f95":function(e,t,a){"use strict";var s=a("8a6a"),n=a.n(s);n.a},"459c":function(e,t,a){"use strict";var s=a("60f7"),n=a.n(s);n.a},"56d7":function(e,t,a){"use strict";a.r(t);a("cadf"),a("551c"),a("097d");var s=a("2b0e"),n=a("9f7b"),r=a("ecee"),i=a("c074"),o=a("ad3d"),c=a("31bd"),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("Sidebar"),a("b-container",{attrs:{fluid:""}},[a("router-view")],1)],1)},u=[],d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-nav",{staticClass:"sidebar"},[a("div",{staticClass:"navbar-header"},[a("b-navbar-brand",{staticClass:"logo-wrapper",attrs:{to:"/"}},[a("font-awesome-icon",{attrs:{icon:"oil-can"}})],1),a("h5",{staticClass:"title"},[e._v("Verkstad")]),a("h6",{staticClass:"subtitle"},[e._v("Mass Spectrometer Maintenance")])],1),a("div",{staticClass:"navbar-body"},[a("b-nav-item",{attrs:{to:"/",exact:""}},[e._v("Home")]),a("b-nav-item",{attrs:{to:"/logbook"}},[e._v("Logbook")]),a("b-nav-item",{attrs:{to:"/tasks"}},[e._v("Tasks")]),a("b-nav-item",{attrs:{to:"/machines"}},[e._v("Machines")]),a("b-nav-item",{attrs:{to:"/users"}},[e._v("Users")])],1),a("div",{staticClass:"navbar-user"},[e.$store.state.user?a("b-nav-text",{staticClass:"user-name"},[e._v("\n      "+e._s(e.$store.state.user.name)+"\n    ")]):e._e(),e.$store.state.user?e._e():a("b-nav-item",{attrs:{to:"/login"}},[e._v("Login")]),e.$store.state.user?a("b-nav-item",{on:{click:e.logout}},[e._v("Logout")]):e._e(),a("a",{staticClass:"seemless",attrs:{href:"#"},on:{click:e.fullScreen}},[e._v("Full screen")])],1),a("div",{staticClass:"navbar-footer"},[a("b-nav-text",[a("router-link",{staticClass:"link-about",attrs:{to:"/about"}},[e._v("Lehtiö Lab "+e._s(e.year))])],1)],1)])},m=[],h={data:function(){return{year:(new Date).getFullYear()}},methods:{logout:function(){this.$store.dispatch("logout")},fullScreen:function(){document.documentElement.webkitRequestFullScreen()}}},p=h,_=(a("ffba"),a("2877")),f=Object(_["a"])(p,d,m,!1,null,"5c6f1596",null);f.options.__file="Sidebar.vue";var v=f.exports,b={name:"App",components:{Sidebar:v}},k=b,g=(a("034f"),Object(_["a"])(k,l,u,!1,null,null,null));g.options.__file="App.vue";var w=g.exports,y=a("8c4f"),x=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper"},[a("page-title-bar",{attrs:{title:"Home"}}),a("div",{staticClass:"description"}),a("b-alert",{attrs:{show:null!==e.message}},[e._v("\n    "+e._s(e.message)+"\n  ")]),e.machineTasksAvailable?a("div",{staticClass:"task-board"},[a("div",{staticClass:"task-box"},[a("h5",[e._v("Latest today")]),a("ol",{staticClass:"latest-today"},[e._l(e.orderedDueMachineTasks.today,function(e){return a("machine-task-card",{key:e.id,staticClass:"task-card",attrs:{data:e}})}),0===e.orderedDueMachineTasks.today.length?a("li",[a("b-alert",{attrs:{show:!0}},[a("div",[e._v("All tasks done for today.")]),1===(new Date).getDay()?a("div",[e._v("Not bad for a Monday!")]):e._e(),4===(new Date).getDay()?a("div",[e._v("It's Thursday, why not going for the pub?")]):e._e(),5===(new Date).getDay()?a("div",[e._v("Go home! It's almost weekend!")]):e._e()])],1):e._e()],2)]),a("div",{staticClass:"task-box"},[a("h5",[e._v("Upcoming")]),a("ol",{staticClass:"upcoming"},e._l(e.orderedDueMachineTasks.upcoming,function(e){return a("machine-task-card",{key:e.id,staticClass:"task-card",attrs:{data:e}})}),1)])]):e._e()],1)},C=[],T=(a("96cf"),a("3b8d")),O=a("2ef0"),D=a.n(O),M=a("9659"),I=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("li",{staticClass:"task-card"},[a("div",{staticClass:"task-color-bar",class:[e.data.dayDiff>-1?"bar-red":e.data.dayDiff>-7?"bar-yellow":"bar-blue"]}),a("div",{staticClass:"task-body",on:{click:e.showTaskDetails}},[a("h1",[e._v(e._s(e.data.machineTask.Task.name))]),a("div",{staticClass:"task-machine"},[e._v(e._s(e.data.machineTask.Machine.name))]),a("div",{staticClass:"task-latest"},[e._v("\n      Latest: "+e._s(e.data.nextDate.split("T")[0])+"\n      ("+e._s(e.data.dayDiff<-1?"in "+e.formatDay(e.data.dayDiff):e.data.dayDiff<0?"today":e.formatDay(e.data.dayDiff)+" ago")+")\n    ")])]),a("b-button",{staticClass:"check-task",class:[e.data.dayDiff>-1?"bar-red":e.data.dayDiff>-7?"bar-yellow":"bar-blue"],attrs:{disabled:!Boolean(e.$store.state.token)},on:{click:e.checkTask}},[a("font-awesome-icon",{attrs:{icon:"check-circle"}})],1),a("b-button",{staticClass:"dismiss-task",class:[e.data.dayDiff>-1?"bar-red":e.data.dayDiff>-7?"bar-yellow":"bar-blue"],attrs:{disabled:!Boolean(e.$store.state.token)},on:{click:e.dismissTask}},[a("font-awesome-icon",{attrs:{icon:"times-circle"}})],1)],1)},E=[],P={name:"Login",props:["data"],methods:{checkTask:function(){this.$router.push({name:"workonmachinetask",params:{mode:"check",machineTaskId:this.data.machineTask.id}})},dismissTask:function(){this.$router.push({name:"workonmachinetask",params:{mode:"dismiss",machineTaskId:this.data.machineTask.id}})},showTaskDetails:function(){this.$router.push({name:"taskdetails",params:{taskId:this.data.machineTask.Task.id}})},formatDay:function(e){var t=Math.abs(Math.ceil(e));return"".concat(t,t>1?" days":" day")}}},$=P,R=(a("3bc1"),Object(_["a"])($,I,E,!1,null,"17f0c3b1",null));R.options.__file="MachineTaskCard.vue";var j=R.exports,L=a("3f4a"),S={index:function(){return Object(L["a"])().get("/machinetasks")},machineTask:function(e){return Object(L["a"])().get("/machinetask/".concat(e))}},B={name:"Home",components:{PageTitleBar:M["a"],MachineTaskCard:j},data:function(){return{message:null,machineTasksAvailable:!1,dueMachineTasks:{today:null,upcoming:null},reloadInterval:6e4}},created:function(){var e=Object(T["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.loadMachineTasks();case 2:this.$options.interval=setInterval(Object(T["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.loadMachineTasks();case 2:case"end":return e.stop()}},e,this)})),this.reloadInterval);case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),beforeDestroy:function(){clearInterval(this.$options.interval)},methods:{loadMachineTasks:function(){var e=Object(T["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.index();case 3:t=e.sent.data.machineTasks,0===t.length?(this.machineTasksAvailable=!1,this.message="There are no upcoming tasks. Please define new tasks."):(this.dueMachineTasks.today=t.filter(function(e){return e.dayDiff>=-1}),this.dueMachineTasks.upcoming=t.filter(function(e){return e.dayDiff<-1}),this.machineTasksAvailable=!0,this.message=null),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),e.t0.response?this.message=e.t0.response.data.error:this.message="No connection to the server. Please contact an admin.";case 10:case"end":return e.stop()}},e,this,[[0,7]])}));function t(){return e.apply(this,arguments)}return t}()},computed:{orderedDueMachineTasks:function(){return{today:D.a.orderBy(this.dueMachineTasks.today,["dayDiff","id"],"desc"),upcoming:D.a.orderBy(this.dueMachineTasks.upcoming,["dayDiff","id"],"desc")}}}},U=B,A=(a("ceda"),Object(_["a"])(U,x,C,!1,null,"3105bf88",null));A.options.__file="Home.vue";var N=A.exports,Q=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper"},[a("page-title-bar",{attrs:{title:"Logbook"}}),a("div",{staticClass:"description"}),a("b-alert",{attrs:{show:null!==e.message}},[e._v("\n    "+e._s(e.message)+"\n  ")]),e.logs.length>0?a("b-table",{staticClass:"logs-table",attrs:{items:e.logs,fields:e.fields,"sort-by":"createdAt","sort-desc":!0,responsive:""},scopedSlots:e._u([{key:"status",fn:function(t){return["check"===t.value?a("font-awesome-icon",{staticStyle:{color:"darkseagreen"},attrs:{icon:"check-circle"}}):"dismiss"===t.value?a("font-awesome-icon",{staticStyle:{color:"lightcoral"},attrs:{icon:"times-circle"}}):e._e()]}},{key:"actions",fn:function(t){return[a("b-button",{directives:[{name:"show",rawName:"v-show",value:e.$store.state.token,expression:"$store.state.token"}],staticClass:"mr-2 btn-details",attrs:{size:"sm"},on:{click:function(a){a.stopPropagation(),e.showDetails(t.item)}}},[e._v("\n        Details\n      ")]),a("b-button",{directives:[{name:"show",rawName:"v-show",value:e.$store.state.token,expression:"$store.state.token"}],staticClass:"mr-2 btn-delete",attrs:{size:"sm"},on:{click:function(a){a.stopPropagation(),e.deleteLogRequest(t.item)}}},[e._v("\n        Delete\n      ")])]}}])}):e._e(),a("b-modal",{attrs:{id:"modalQuestion",title:"Delete log?"},on:{ok:e.deleteLog}},[a("p",[e._v("Do you really want to delete this log?")])])],1)},q=[],K=(a("28a5"),{add:function(e){return Object(L["a"])().post("/addlog",e)},index:function(){return Object(L["a"])().get("/logbook")},log:function(e){return Object(L["a"])().get("/log/".concat(e))},deleteLog:function(e){return Object(L["a"])().delete("/deletelog/".concat(e))}}),F={name:"Logbook",components:{PageTitleBar:M["a"]},data:function(){return{message:null,logs:[],fields:{status:{label:"",sortable:!1},task:{label:"Task",sortable:!0},machine:{label:"Machine",sortable:!0},createdAt:{label:"Done",sortable:!0,formatter:function(e){var t=new Date(e);return t.toISOString().split("T")[0]}},user:{label:"by",sortable:!0},actions:{label:"",sortable:!1}},modalQuestion:{id:null}}},created:function(){var e=Object(T["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.loadLogs();case 2:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),methods:{loadLogs:function(){var e=Object(T["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,K.index();case 3:this.logs=e.sent.data,0===this.logs.length?this.message="There are no logs.":this.message=null,e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),e.t0.response?this.message=e.t0.response.data.error:this.message="No connection to the server. Please contact an admin.";case 10:case"end":return e.stop()}},e,this,[[0,7]])}));function t(){return e.apply(this,arguments)}return t}(),showDetails:function(e){this.$router.push({name:"logdetails",params:{logId:e.id}})},deleteLogRequest:function(e){this.modalQuestion.id=e.id,this.$root.$emit("bv::show::modal","modalQuestion")},deleteLog:function(){var e=Object(T["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,K.deleteLog(this.modalQuestion.id);case 3:return e.next=5,this.loadLogs();case 5:this.message=null,e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),e.t0.response?this.message=e.t0.response.data.error:this.message="No connection to the server. Please contact an admin.";case 11:case"end":return e.stop()}},e,this,[[0,8]])}));function t(){return e.apply(this,arguments)}return t}()}},W=F,z=Object(_["a"])(W,Q,q,!1,null,"2a5c114a",null);z.options.__file="Logbook.vue";var G=z.exports,H=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper"},[e.log?a("page-title-bar",{attrs:{title:e.log.task,showBack:!0}}):e._e(),e.log?e._e():a("page-title-bar",{attrs:{title:"Error",showBack:"true"}}),a("div",{staticClass:"description"}),a("b-alert",{attrs:{show:null!==e.message}},[e._v("\n    "+e._s(e.message)+"\n  ")]),e.log?a("table",{staticClass:"log-details-table"},[a("tr",[a("td",{staticClass:"row-title"},[e._v("Satus:")]),a("td",["check"===e.log.status?a("font-awesome-icon",{staticStyle:{color:"darkseagreen"},attrs:{icon:"check-circle"}}):e._e(),"dismiss"===e.log.status?a("font-awesome-icon",{staticStyle:{color:"lightcoral"},attrs:{icon:"times-circle"}}):e._e()],1)]),a("tr",[a("td",{staticClass:"row-title"},[e._v("Description:")]),a("td",[e._v(e._s(e.log.description))])]),a("tr",[a("td",{staticClass:"row-title"},[e._v("If not OK:")]),a("td",[e._v(e._s(e.log.repare))])]),a("tr",[a("td",{staticClass:"row-title"},[e._v("Interval:")]),a("td",[e._v("\n        "+e._s(e.log.interval+(1===e.log.interval?" day":" days"))+"\n      ")])]),a("tr",[a("td",{staticClass:"row-title"},[e._v("Machine:")]),a("td",[e._v(e._s(e.log.machine))])]),a("tr",[a("td",{staticClass:"row-title"},[e._v("Done:")]),a("td",[e._v(e._s(e.log.createdAt.split("T")[0]))])]),a("tr",[a("td",{staticClass:"row-title"},[e._v("By:")]),a("td",[e._v(e._s(e.log.user))])]),a("tr",{staticClass:"spacer"}),a("tr",[a("td",{staticClass:"row-title"},[e._v("Comment:")]),a("td",[e._v(e._s(e.log.comment))])])]):e._e()],1)},J=[],Y={name:"LogDetails",components:{PageTitleBar:M["a"]},props:["logId"],data:function(){return{message:null,log:null}},created:function(){var e=Object(T["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,K.log(this.logId);case 3:this.log=e.sent.data,this.message=null,e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),e.t0.response?this.message=e.t0.response.data.error:this.message="No connection to the server. Please contact an admin.";case 10:case"end":return e.stop()}},e,this,[[0,7]])}));function t(){return e.apply(this,arguments)}return t}()},V=Y,X=(a("0224"),Object(_["a"])(V,H,J,!1,null,"2456b989",null));X.options.__file="LogDetails.vue";var Z=X.exports,ee=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper"},[a("page-title-bar",{attrs:{title:"Users"}}),a("div",{staticClass:"description"}),a("b-alert",{attrs:{show:null!==e.message}},[e._v("\n    "+e._s(e.message)+"\n  ")]),e.users.length>0?a("b-table",{staticClass:"user-table",attrs:{items:e.users,fields:e.fields,responsive:""},scopedSlots:e._u([{key:"actions",fn:function(t){return[a("b-button",{directives:[{name:"show",rawName:"v-show",value:e.$store.state.token,expression:"$store.state.token"}],staticClass:"mr-2 btn-delete",attrs:{size:"sm"},on:{click:function(a){a.stopPropagation(),e.deleteUserRequest(t.item)}}},[e._v("\n        Delete\n      ")])]}}])}):e._e(),!e.$store.state.user&&this.users.length>0?a("b-button",{staticClass:"btn-outlined",attrs:{to:"/login"}},[e._v("\n    Login\n  ")]):e._e(),a("b-button",{staticClass:"btn-outlined",attrs:{to:"/signup"}},[e._v("\n    Add user\n  ")]),a("b-modal",{attrs:{id:"modalQuestion",title:"Delete user?"},on:{ok:e.deleteUser}},[a("p",[e._v("Do you really want to kick out this user?")]),a("p",[a("strong",[e._v(e._s(e.modalQuestion.userName)),a("br"),e._v("\n       "+e._s(e.modalQuestion.userEMail))])]),e.$store.state.user?a("p",{directives:[{name:"show",rawName:"v-show",value:e.$store.state.user.email===e.modalQuestion.userEMail,expression:"$store.state.user.email === modalQuestion.userEMail"}],staticStyle:{color:"crimson","font-weight":"bold"}},[e._v("\n      Warning: You are going to delete yourself. If you continue,\n      you will be logged out automatically.\n    ")]):e._e()])],1)},te=[],ae=(a("7f7f"),{signUp:function(e){return Object(L["a"])().post("/signup",e)},login:function(e){return Object(L["a"])().post("/login",e)},index:function(){return Object(L["a"])().get("/users")},deleteUser:function(e){return Object(L["a"])().delete("deleteuser/".concat(e))}}),se={name:"Users",components:{PageTitleBar:M["a"]},data:function(){return{message:null,users:[],fields:{name:{label:"Name",sortable:!0},email:{label:"eMail"},createdAt:{label:"Created",sortable:!0,formatter:function(e){var t=new Date(e);return t.toISOString().split("T")[0]}},actions:{label:"",sortable:!1}},modalQuestion:{userId:null,userName:"",userEMail:""}}},created:function(){var e=Object(T["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.loadUsers();case 2:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),methods:{loadUsers:function(){var e=Object(T["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ae.index();case 3:this.users=e.sent.data,0===this.users.length?this.message="There are no users registered.":this.message=null,e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),e.t0.response?this.message=e.t0.response.data.error:this.message="No connection to the server. Please contact an admin.";case 10:case"end":return e.stop()}},e,this,[[0,7]])}));function t(){return e.apply(this,arguments)}return t}(),deleteUserRequest:function(e){this.modalQuestion.userId=e.id,this.modalQuestion.userName=e.name,this.modalQuestion.userEMail=e.email,this.$root.$emit("bv::show::modal","modalQuestion")},deleteUser:function(){var e=Object(T["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ae.deleteUser(this.modalQuestion.userId);case 3:this.$store.state.user&&this.modalQuestion.userEMail===this.$store.state.user.email&&this.logout(),this.loadUsers(),this.message=null,e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),e.t0.response?this.message=e.t0.response.data.error:this.message="No connection to the server. Please contact an admin.";case 11:case"end":return e.stop()}},e,this,[[0,8]])}));function t(){return e.apply(this,arguments)}return t}(),logout:function(){this.$store.dispatch("logout")}}},ne=se,re=Object(_["a"])(ne,ee,te,!1,null,"59eb6a48",null);re.options.__file="Users.vue";var ie=re.exports,oe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper"},[a("page-title-bar",{attrs:{title:"Sign up",showBack:!0}}),a("div",{staticClass:"description"},[e._v("Register a new user for this app by submitting the form below.")]),a("b-alert",{attrs:{show:null!==e.message}},[e._v("\n    "+e._s(e.message)+"\n  ")]),e.showForm?a("b-form",{attrs:{autocomplete:"off"},on:{submit:function(t){return t.preventDefault(),e.signUp(t)},reset:function(t){return t.preventDefault(),e.reset(t)}}},[a("b-form-group",{attrs:{id:"emailLabel",label:"eMail address:","label-for":"email"}},[a("b-form-input",{attrs:{id:"email",type:"email",required:"",placeholder:"Enter eMail"},model:{value:e.user.email,callback:function(t){e.$set(e.user,"email",t)},expression:"user.email"}})],1),a("b-form-group",{attrs:{id:"nameLabel",label:"Name:","label-for":"name"}},[a("b-form-input",{attrs:{id:"name",type:"text",required:"",placeholder:"Enter name"},model:{value:e.user.name,callback:function(t){e.$set(e.user,"name",t)},expression:"user.name"}})],1),a("b-form-group",{attrs:{id:"passwordLabel",label:"Password:","label-for":"password"}},[a("b-form-input",{attrs:{id:"password",type:"password",required:"",placeholder:"Enter password (>3 characters)"},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}})],1),a("b-button",{staticClass:"btn-outlined",attrs:{type:"submit"}},[e._v("Sign up")]),a("b-button",{staticClass:"btn-outlined",attrs:{type:"reset"}},[e._v("Reset")])],1):e._e()],1)},ce=[],le={name:"Signup",components:{PageTitleBar:M["a"]},data:function(){return{user:{email:"",name:"",password:""},showForm:!0,message:null}},methods:{signUp:function(){var e=Object(T["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ae.signUp({email:this.user.email,name:this.user.name,password:this.user.password});case 3:this.message=null,this.$router.push({path:"/users"}),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),e.t0.response?this.message=e.t0.response.data.error:this.message="No connection to the server. Please contact an admin.";case 10:case"end":return e.stop()}},e,this,[[0,7]])}));function t(){return e.apply(this,arguments)}return t}(),reset:function(){var e=this;this.user.email="",this.user.name="",this.user.password="",this.message=null,this.showForm=!1,this.$nextTick(function(){e.showForm=!0})}}},ue=le,de=Object(_["a"])(ue,oe,ce,!1,null,"3ace11de",null);de.options.__file="Signup.vue";var me=de.exports,he=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper"},[a("page-title-bar",{attrs:{title:"Login",showBack:!0}}),a("div",{staticClass:"description"},[e._v("Come in and take care of your mass specs.")]),a("b-alert",{attrs:{show:null!==e.message}},[e._v("\n    "+e._s(e.message)+"\n  ")]),e.showForm?a("b-form",{on:{submit:function(t){return t.preventDefault(),e.login(t)},reset:function(t){return t.preventDefault(),e.reset(t)}}},[a("b-form-group",{attrs:{id:"emailLabel",label:"eMail address:","label-for":"email"}},[a("b-form-input",{attrs:{id:"email",type:"email",required:"",placeholder:"Enter eMail"},model:{value:e.user.email,callback:function(t){e.$set(e.user,"email",t)},expression:"user.email"}})],1),a("b-form-group",{attrs:{id:"passwordLabel",label:"Password:","label-for":"password"}},[a("b-form-input",{attrs:{id:"password",type:"password",required:"",placeholder:"Enter password"},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}})],1),a("b-button",{staticClass:"btn-outlined",attrs:{type:"submit"}},[e._v("Login")]),a("b-button",{staticClass:"btn-outlined",attrs:{type:"reset"}},[e._v("Reset")])],1):e._e()],1)},pe=[],_e={name:"Login",components:{PageTitleBar:M["a"]},data:function(){return{user:{email:"",password:""},showForm:!0,message:null}},methods:{login:function(){var e=Object(T["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ae.login({email:this.user.email,password:this.user.password});case 3:t=e.sent,this.$store.dispatch("setUser",t.data),this.message=null,this.$router.push({name:this.$store.state.route.from.name}),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),e.t0.response?this.message=e.t0.response.data.error:this.message="No connection to the server. Please contact an admin.";case 12:case"end":return e.stop()}},e,this,[[0,9]])}));function t(){return e.apply(this,arguments)}return t}(),reset:function(){var e=this;this.user.email="",this.user.name="",this.user.password="",this.message=null,this.showForm=!1,this.$nextTick(function(){e.showForm=!0})}}},fe=_e,ve=Object(_["a"])(fe,he,pe,!1,null,"630eeda3",null);ve.options.__file="Login.vue";var be=ve.exports,ke=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper"},[a("page-title-bar",{attrs:{title:"Machines"}}),a("div",{staticClass:"description"}),a("b-alert",{attrs:{show:null!==e.message}},[e._v("\n    "+e._s(e.message)+"\n  ")]),e.machines.length>0?a("b-table",{staticClass:"machines-table",attrs:{items:e.machines,fields:e.fields,responsive:""},scopedSlots:e._u([{key:"actions",fn:function(t){return[a("b-button",{directives:[{name:"show",rawName:"v-show",value:e.$store.state.token,expression:"$store.state.token"}],staticClass:"mr-2 btn-details",attrs:{size:"sm"},on:{click:function(a){a.stopPropagation(),e.editMachine(t.item)}}},[e._v("\n        Edit\n      ")]),a("b-button",{directives:[{name:"show",rawName:"v-show",value:e.$store.state.token,expression:"$store.state.token"}],staticClass:"mr-2 btn-delete",attrs:{size:"sm"},on:{click:function(a){a.stopPropagation(),e.deleteMachineRequest(t.item)}}},[e._v("\n        Delete\n      ")]),a("b-button",{directives:[{name:"show",rawName:"v-show",value:e.$store.state.token&&t.item.kanteleId,expression:"$store.state.token && row.item.kanteleId"}],staticClass:"mr-2 btn-details",attrs:{size:"sm"},on:{click:function(a){a.stopPropagation(),e.showQC(t.item)}}},[e._v("\n        Show QC\n      ")])]}}])}):e._e(),a("b-button",{directives:[{name:"show",rawName:"v-show",value:e.$store.state.token,expression:"$store.state.token"}],staticClass:"btn-outlined",attrs:{to:"/addeditmachine/add"}},[e._v("\n    Add machine\n  ")]),a("b-modal",{attrs:{id:"modalQuestion",title:"Delete machine?"},on:{ok:e.deleteMachine,hide:e.resetModal}},[a("p",[e._v("Do you really want to delete this machine?")]),a("p",[a("strong",[e._v(e._s(e.modalQuestion.name))])]),a("p",[e._v("Please note: Deleting a machine can lead to tasks\n      without machine. Please control your task settings\n      after deletion.")])])],1)},ge=[],we=a("aeee"),ye={name:"Machines",components:{PageTitleBar:M["a"]},data:function(){return{message:null,machines:[],fields:{name:{label:"Name",sortable:!0},type:{label:"Type",sortable:!0},kanteleId:{label:"Kantele ID",sortable:!0},createdAt:{label:"Created",sortable:!0,formatter:function(e){var t=new Date(e);return t.toISOString().split("T")[0]}},"User.name":{label:"by",sortable:!0},actions:{label:"",sortable:!1}},modalQuestion:{id:null,name:""}}},created:function(){var e=Object(T["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.loadMachines();case 2:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),methods:{loadMachines:function(){var e=Object(T["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,we["a"].index();case 3:this.machines=e.sent.data,0===this.machines.length?this.message="There are no machines.":this.message=null,e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),e.t0.response?this.message=e.t0.response.data.error:this.message="No connection to the server. Please contact an admin.";case 10:case"end":return e.stop()}},e,this,[[0,7]])}));function t(){return e.apply(this,arguments)}return t}(),deleteMachineRequest:function(e){this.modalQuestion={id:e.id,name:e.name},this.$root.$emit("bv::show::modal","modalQuestion")},editMachine:function(e){this.$router.push({name:"addeditmachine",params:{machineId:e.id}})},showQC:function(e){this.$router.push({name:"machineqc",params:{machineId:e.id}})},deleteMachine:function(){var e=Object(T["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,we["a"].deleteMachine(this.modalQuestion.id);case 3:return e.next=5,this.loadMachines();case 5:this.message=null,e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),e.t0.response?this.message=e.t0.response.data.error:this.message="No connection to the server. Please contact an admin.";case 11:case"end":return e.stop()}},e,this,[[0,8]])}));function t(){return e.apply(this,arguments)}return t}(),resetModal:function(){this.modalQuestion.name=""}}},xe=ye,Ce=Object(_["a"])(xe,ke,ge,!1,null,"13ae183a",null);Ce.options.__file="Machines.vue";var Te=Ce.exports,Oe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper"},["add"===e.machineId?a("page-title-bar",{attrs:{title:"Add machine",showBack:!0}}):e._e(),"add"!==e.machineId?a("page-title-bar",{attrs:{title:e.machine.name,showBack:!0}}):e._e(),"add"===e.machineId?a("div",{staticClass:"description"},[e._v("Register a new mass spectrometer.")]):a("div",{staticClass:"description"},[e._v("Edit the mass spectrometer.")]),a("b-alert",{attrs:{show:null!==e.message}},[e._v("\n    "+e._s(e.message)+"\n  ")]),e.showForm?a("b-form",{attrs:{autocomplete:"off"},on:{submit:function(t){return t.preventDefault(),e.addEditMachine(t)},reset:function(t){return t.preventDefault(),e.reset(t)}}},[a("b-form-group",{attrs:{id:"nameLabel",label:"Name:","label-for":"name"}},[a("b-form-input",{attrs:{id:"name",type:"text",required:"",placeholder:"Enter name"},model:{value:e.machine.name,callback:function(t){e.$set(e.machine,"name",t)},expression:"machine.name"}})],1),a("b-form-group",{attrs:{id:"typeLabel",label:"Type:","label-for":"type"}},[a("b-form-input",{attrs:{id:"type",placeholder:"Enter type"},model:{value:e.machine.type,callback:function(t){e.$set(e.machine,"type",t)},expression:"machine.type"}})],1),a("b-form-group",{attrs:{id:"kanteleIdLabel",label:"Kantele ID:","label-for":"kanteleId",description:"Pleas ask your local admin."}},[a("b-form-input",{attrs:{id:"kanteleId",placeholder:"Enter Kantele ID"},model:{value:e.machine.kanteleId,callback:function(t){e.$set(e.machine,"kanteleId",t)},expression:"machine.kanteleId"}})],1),"add"===e.machineId?a("b-button",{staticClass:"btn-outlined",attrs:{type:"submit"}},[e._v("\n      Add machine\n    ")]):e._e(),"add"!==e.machineId?a("b-button",{staticClass:"btn-outlined",attrs:{type:"submit"}},[e._v("\n      Save changes\n    ")]):e._e(),a("b-button",{staticClass:"btn-outlined",attrs:{type:"reset"}},[e._v("Reset")])],1):e._e()],1)},De=[],Me={name:"AddEditMachine",components:{PageTitleBar:M["a"]},props:["machineId"],data:function(){return{machine:{name:"",type:"",kanteleId:null},showForm:!0,message:null}},created:function(){var e=Object(T["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if("add"===this.machineId){e.next=4;break}return e.next=3,we["a"].machine(this.machineId);case 3:this.machine=e.sent.data;case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),methods:{addEditMachine:function(){var e=Object(T["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,"add"!==this.machineId){e.next=6;break}return e.next=4,we["a"].add(this.machine);case 4:e.next=8;break;case 6:return e.next=8,we["a"].update(this.machine);case 8:this.message=null,this.$router.push({path:"/machines"}),e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](0),e.t0.response?this.message=e.t0.response.data.error:this.message="No connection to the server. Please contact an admin.";case 15:case"end":return e.stop()}},e,this,[[0,12]])}));function t(){return e.apply(this,arguments)}return t}(),reset:function(){var e=this;this.machine.name="",this.machine.type="",this.message=null,this.showForm=!1,this.$nextTick(function(){e.showForm=!0})}}},Ie=Me,Ee=Object(_["a"])(Ie,Oe,De,!1,null,"d5b1dc1e",null);Ee.options.__file="AddEditMachine.vue";var Pe=Ee.exports,$e=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper"},[a("page-title-bar",{attrs:{title:"Tasks"}}),a("div",{staticClass:"description"}),a("b-alert",{attrs:{show:null!==e.message}},[e._v("\n    "+e._s(e.message)+"\n  ")]),e.tasks.length>0?a("b-table",{staticClass:"tasks-table",attrs:{items:e.tasks,fields:e.fields,responsive:""},scopedSlots:e._u([{key:"actions",fn:function(t){return[a("b-button",{directives:[{name:"show",rawName:"v-show",value:e.$store.state.token,expression:"$store.state.token"}],staticClass:"mr-2 btn-details",attrs:{size:"sm"},on:{click:function(a){a.stopPropagation(),e.showEdit(t.item)}}},[e._v("\n        Edit\n      ")]),a("b-button",{directives:[{name:"show",rawName:"v-show",value:e.$store.state.token,expression:"$store.state.token"}],staticClass:"mr-2 btn-delete",attrs:{size:"sm"},on:{click:function(a){a.stopPropagation(),e.deleteTaskRequest(t.item)}}},[e._v("\n        Delete\n      ")])]}}])}):e._e(),a("b-button",{directives:[{name:"show",rawName:"v-show",value:e.$store.state.token,expression:"$store.state.token"}],staticClass:"btn-outlined",attrs:{to:"/addedittask/add"}},[e._v("\n    Add task\n  ")]),a("b-modal",{attrs:{id:"modalQuestion",title:"Delete task?"},on:{ok:e.deleteTask}},[a("p",[e._v("Do you really want to delete this task?")]),a("p",[a("strong",[e._v(e._s(e.modalQuestion.name))])])])],1)},Re=[],je=(a("6b54"),{add:function(e){return Object(L["a"])().post("/addtask",e)},update:function(e){return Object(L["a"])().put("/updatetask/".concat(e.task.id),e)},index:function(){return Object(L["a"])().get("/tasks")},deleteTask:function(e){return Object(L["a"])().delete("deletetask/".concat(e))},task:function(e){return Object(L["a"])().get("/task/".concat(e))}}),Le={name:"Tasks",components:{PageTitleBar:M["a"]},data:function(){return{message:null,tasks:[],fields:{name:{label:"Name",sortable:!0},description:{label:"Description"},interval:{label:"Interval",sortable:!0,formatter:function(e){var t=1===e?" day":" days";return e.toString()+t}},createdAt:{label:"Created",sortable:!0,formatter:function(e){var t=new Date(e);return t.toISOString().split("T")[0]}},"User.name":{label:"by",sortable:!0},actions:{label:"",sortable:!1}},modalQuestion:{id:null,name:""}}},created:function(){var e=Object(T["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.loadTasks();case 2:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),methods:{loadTasks:function(){var e=Object(T["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,je.index();case 3:this.tasks=e.sent.data,0===this.tasks.length?this.message="There are no tasks.":this.message=null,e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),e.t0.response?this.message=e.t0.response.data.error:this.message="No connection to the server. Please contact an admin.";case 10:case"end":return e.stop()}},e,this,[[0,7]])}));function t(){return e.apply(this,arguments)}return t}(),deleteTaskRequest:function(e){this.modalQuestion.id=e.id,this.modalQuestion.name=e.name,this.$root.$emit("bv::show::modal","modalQuestion")},deleteTask:function(){var e=Object(T["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,je.deleteTask(this.modalQuestion.id);case 3:return e.next=5,this.loadTasks();case 5:this.message=null,e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),e.t0.response?this.message=e.t0.response.data.error:this.message="No connection to the server. Please contact an admin.";case 11:case"end":return e.stop()}},e,this,[[0,8]])}));function t(){return e.apply(this,arguments)}return t}(),showEdit:function(e){this.$router.push({name:"addedittask",params:{taskId:e.id}})}}},Se=Le,Be=Object(_["a"])(Se,$e,Re,!1,null,"a823ba28",null);Be.options.__file="Tasks.vue";var Ue=Be.exports,Ae=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper"},["add"===e.taskId?a("page-title-bar",{attrs:{title:"Add task",showBack:!0}}):e._e(),"add"!==e.taskId?a("page-title-bar",{attrs:{title:e.task.name,showBack:!0}}):e._e(),"add"===e.taskId?a("div",{staticClass:"description"},[e._v("Create a new maintenance task.")]):a("div",{staticClass:"description"},[e._v("Edit a maintenance task.")]),a("b-alert",{attrs:{show:null!==e.message}},[e._v("\n    "+e._s(e.message)+"\n  ")]),e.showForm?a("b-form",{attrs:{autocomplete:"off"},on:{submit:function(t){return t.preventDefault(),e.addEditTask(t)},reset:function(t){return t.preventDefault(),e.reset(t)}}},[a("b-form-group",{attrs:{id:"nameLabel",label:"Name:","label-for":"name"}},[a("b-form-input",{attrs:{id:"name",type:"text",placeholder:"Must be unique",required:""},model:{value:e.task.name,callback:function(t){e.$set(e.task,"name",t)},expression:"task.name"}})],1),a("b-form-group",{attrs:{id:"descriptionLabel",label:"Description:","label-for":"description"}},[a("b-form-input",{attrs:{id:"description",placeholder:"What is the actual task?"},model:{value:e.task.description,callback:function(t){e.$set(e.task,"description",t)},expression:"task.description"}})],1),a("b-form-group",{attrs:{id:"machineLabel",label:"Select machines:","label-for":"machines",description:"add"!==e.taskId?"Changing the machine selection will rearrange tasks.":""}},[a("b-form-select",{attrs:{id:"machines",options:e.machines,multiple:""},model:{value:e.machineIds,callback:function(t){e.machineIds=t},expression:"machineIds"}})],1),a("b-form-group",{attrs:{id:"repareLabel",label:"If not OK:","label-for":"repare"}},[a("b-form-input",{attrs:{id:"repare",placeholder:"What to do?"},model:{value:e.task.repare,callback:function(t){e.$set(e.task,"repare",t)},expression:"task.repare"}})],1),a("b-form-group",{attrs:{id:"startLabel",label:"Start date:","label-for":"start",description:"If the start date is during a weekend,\n                    the task is postponed to the next Monday instead."}},[a("b-form-input",{ref:"start",attrs:{id:"start",type:"date"},model:{value:e.task.startDate,callback:function(t){e.$set(e.task,"startDate",t)},expression:"task.startDate"}})],1),a("b-form-group",{attrs:{id:"intervalLabel",label:"Interval:","label-for":"interval",description:"If the interval leads to a due date during a weekend,\n                    the task is postponed to the next Monday instead."}},[a("b-form-input",{attrs:{id:"interval",type:"number",placeholder:"in days"},model:{value:e.task.interval,callback:function(t){e.$set(e.task,"interval",t)},expression:"task.interval"}})],1),a("b-button",{staticClass:"btn-outlined",attrs:{type:"submit"}},[e._v("\n      "+e._s("add"===e.taskId?"Add task":"Save changes")+"\n    ")]),a("b-button",{staticClass:"btn-outlined",attrs:{type:"reset"}},[e._v("Reset")])],1):e._e()],1)},Ne=[],Qe=a("cebc"),qe={name:"AddEditTask",components:{PageTitleBar:M["a"]},props:["taskId"],data:function(){return{task:{name:"",description:"",repare:"",startDate:"",interval:""},machineIds:[],machines:[],selectedMachines:[],showForm:!0,message:null}},created:function(){var e=Object(T["a"])(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,we["a"].index();case 2:if(t=e.sent.data,0===t.length&&(this.message="First you have to define a mass spec in the machines tab.",this.showForm=!1),this.machines=t.map(function(e){return{value:e.id,text:e.name}}),"add"===this.taskId){e.next=11;break}return e.next=8,je.task(this.taskId);case 8:a=e.sent.data,this.task=Object(Qe["a"])({},a,{startDate:a.startDate.split("T")[0]}),this.machineIds=this.task.MachineTasks.map(function(e){return e.Machine.id});case 11:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),methods:{addEditTask:function(){var e=Object(T["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,"add"!==this.taskId){e.next=6;break}return e.next=4,je.add({task:this.task,machineIds:this.machineIds});case 4:e.next=8;break;case 6:return e.next=8,je.update({task:Object(Qe["a"])({id:this.taskId},this.task),machineIds:this.machineIds});case 8:this.message=null,this.$router.push({path:"/tasks"}),e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](0),e.t0.response?this.message=e.t0.response.data.error:this.message="No connection to the server. Please contact an admin.";case 15:case"end":return e.stop()}},e,this,[[0,12]])}));function t(){return e.apply(this,arguments)}return t}(),reset:function(){var e=this;this.task.name="",this.task.description="",this.task.machineId=null,this.task.repare="",this.task.start="",this.task.interval="",this.message=null,this.showForm=!1,this.$nextTick(function(){e.showForm=!0})}}},Ke=qe,Fe=Object(_["a"])(Ke,Ae,Ne,!1,null,"497a8216",null);Fe.options.__file="AddEditTask.vue";var We=Fe.exports,ze=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper"},[e.task?a("page-title-bar",{attrs:{title:e.task.name,showBack:!0}}):e._e(),e.task?e._e():a("page-title-bar",{attrs:{title:"Error",showBack:"true"}}),a("div",{staticClass:"description"}),a("b-alert",{attrs:{show:null!==e.message}},[e._v("\n    "+e._s(e.message)+"\n  ")]),e.task?a("table",{staticClass:"task-details-table"},[a("tr",[a("td",{staticClass:"row-title"},[e._v("Description")]),a("td",[e._v(e._s(e.task.description))])]),a("tr",[a("td",{staticClass:"row-title"},[e._v("If not OK")]),a("td",[e._v(e._s(e.task.repare))])]),a("tr",[a("td",{staticClass:"row-title"},[e._v("First due date")]),a("td",[e._v(e._s(e.task.startDate.split("T")[0]))])]),a("tr",[a("td",{staticClass:"row-title"},[e._v("Interval")]),a("td",[e._v(e._s(e.task.interval+(1===e.task.interval?" day":" days")))])]),a("tr",[a("td",{staticClass:"row-title"},[e._v(e._s(1===e.machineNames.length?"Machine":"Machines"))]),a("td",[e._v(e._s(e.machineNames.join(", ")))])]),a("tr",[a("td",{staticClass:"row-title"},[e._v("Created")]),a("td",[e._v(e._s(e.task.createdAt.split("T")[0]))])]),a("tr",[a("td",{staticClass:"row-title"},[e._v("Created by")]),a("td",[e._v(e._s(e.task.User.name))])])]):e._e()],1)},Ge=[],He={name:"Tasks",components:{PageTitleBar:M["a"]},props:["taskId"],data:function(){return{message:null,task:null,machineNames:[]}},created:function(){var e=Object(T["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,je.task(this.taskId);case 3:this.task=e.sent.data,t=this.task.MachineTasks.map(function(e){return e.Machine.name}),this.machineNames=t.filter(function(e,t,a){return a.indexOf(e)===t}),this.message=null,e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),e.t0.response?this.message=e.t0.response.data.error:this.message="No connection to the server. Please contact an admin.";case 12:case"end":return e.stop()}},e,this,[[0,9]])}));function t(){return e.apply(this,arguments)}return t}()},Je=He,Ye=(a("eeae"),Object(_["a"])(Je,ze,Ge,!1,null,"2b2ddf46",null));Ye.options.__file="TaskDetails.vue";var Ve=Ye.exports,Xe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.machineTask?a("div",{staticClass:"wrapper"},[a("page-title-bar",{attrs:{title:e.machineTask.Task.name,showBack:!0}}),"check"===e.mode?a("div",{staticClass:"description green-desc"},[a("font-awesome-icon",{attrs:{icon:"check-circle"}}),e._v("\n    The task has been successfully accomplished. Congrats!"),a("br")],1):e._e(),"dismiss"===e.mode?a("div",{staticClass:"description red-desc"},[a("font-awesome-icon",{attrs:{icon:"times-circle"}}),e._v("\n    There have been issues!\n  ")],1):e._e(),a("b-alert",{attrs:{show:null!==e.message}},[e._v("\n    "+e._s(e.message)+"\n  ")]),a("table",[a("tr",[a("td",{staticClass:"row-title"},[e._v("What to do:")]),a("td",[e._v(e._s(e.machineTask.Task.description))])]),a("tr",[a("td",{staticClass:"row-title"},[e._v("If not OK:")]),a("td",[e._v(e._s(e.machineTask.Task.repare))])]),a("tr",[a("td",{staticClass:"row-title"},[e._v("Machine:")]),a("td",[e._v(e._s(e.machineTask.Machine.name))])])]),e.showForm?a("b-form",{on:{submit:function(t){return t.preventDefault(),e.saveLog(t)},reset:function(t){return t.preventDefault(),e.reset(t)}}},[a("b-form-group",{attrs:{id:"commentLabel",label:"Comment:","label-for":"comment"}},[a("b-form-textarea",{class:["check"===e.mode?"green-textarea":"red-textarea"],attrs:{id:"comment",placeholder:"Enter some notes",rows:"3","no-resize":!0},model:{value:e.comment,callback:function(t){e.comment=t},expression:"comment"}})],1),a("b-button",{staticClass:"btn-outlined",attrs:{type:"submit"}},[e._v("Save")]),a("b-button",{staticClass:"btn-outlined",attrs:{type:"reset"}},[e._v("Reset")])],1):e._e()],1):e._e()},Ze=[],et={name:"WorkOnMachineTask",components:{PageTitleBar:M["a"]},props:["mode","machineTaskId"],data:function(){return{machineTask:null,comment:"",showForm:!0,message:null}},created:function(){var e=Object(T["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,S.machineTask(this.machineTaskId);case 2:this.machineTask=e.sent.data.machineTask;case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),methods:{saveLog:function(){var e=Object(T["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,K.add({status:this.mode,machineTaskId:this.machineTask.id,comment:this.comment});case 3:this.message=null,this.$router.push({path:"/"}),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),e.t0.response?this.message=e.t0.response.data.error:this.message="No connection to the server. Please contact an admin.";case 10:case"end":return e.stop()}},e,this,[[0,7]])}));function t(){return e.apply(this,arguments)}return t}(),reset:function(){var e=this;this.comment="",this.showForm=!1,this.$nextTick(function(){e.showForm=!0})}}},tt=et,at=(a("3f95"),Object(_["a"])(tt,Xe,Ze,!1,null,"cb36d53c",null));at.options.__file="WorkOnMachineTask.vue";var st=at.exports,nt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.machine?a("div",{staticClass:"qc-wrapper"},[a("page-title-bar",{attrs:{title:e.machine.name+" Quality Control",showBack:!0}}),a("div",{staticClass:"description"}),a("b-alert",{attrs:{show:null!==e.message}},[e._v("\n    "+e._s(e.message)+"\n  ")]),e.plotsLoaded||e.message?e._e():a("div",{staticClass:"description"},[e._v("Plots loading...")]),e.plotsLoaded?a("div",{staticClass:"plots"},[a("h5",[e._v("Number of identifications")]),a("div",{attrs:{id:e.plots.bokeh_code.div.amount_peptides.elementid}}),a("hr"),a("h5",[e._v("Number of PSMs")]),a("div",{attrs:{id:e.plots.bokeh_code.div.amount_psms.elementid}}),a("hr"),a("h5",[e._v("Peptide precursor areas")]),a("div",{attrs:{id:e.plots.bokeh_code.div.precursorarea.elementid}}),a("hr"),a("h5",[e._v("PSM MSGFScore")]),a("div",{attrs:{id:e.plots.bokeh_code.div.msgfscore.elementid}}),a("hr"),a("h5",[e._v("Precursor error (ppm)")]),a("div",{attrs:{id:e.plots.bokeh_code.div.prec_error.elementid}}),a("hr"),a("h5",[e._v("Retention time (min)")]),a("div",{attrs:{id:e.plots.bokeh_code.div.rt.elementid}})]):e._e()],1):e._e()},rt=[],it=a("a85a"),ot=it["a"],ct=(a("9021"),Object(_["a"])(ot,nt,rt,!1,null,"4802ca58",null));ct.options.__file="MachineQC.vue";var lt=ct.exports,ut=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper"},[a("page-title-bar",{attrs:{title:"About this app"}}),a("div",{staticClass:"description"},[e._v("Verkstad – The mass spec maintenance app.")]),a("br"),e._m(0),a("br"),e._m(1),e._m(2),a("br"),a("p",[e._v("\n    Please note: The server is logging request information from this app.\n  ")])],1)},dt=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",[e._v("\n    This app was created by Matthias Stahl in the\n    "),a("a",{attrs:{href:"http://lehtiolab.se"}},[e._v("Lehtiö laboratory")]),e._v("\n    at "),a("a",{attrs:{href:"http://ki.se"}},[e._v("Karolinska Institutet")]),e._v(" in winter 2019.\n  ")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",[e._v("\n    Client code: "),a("a",{attrs:{href:"https://github.com/mtstahl/verkstad_client"}},[e._v("github.com/mtstahl/verkstad_client")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",[e._v("\n    Server code: "),a("a",{attrs:{href:"https://github.com/mtstahl/verkstad_server"}},[e._v("github.com/mtstahl/verkstad_server")])])}],mt={name:"About",components:{PageTitleBar:M["a"]}},ht=mt,pt=(a("459c"),Object(_["a"])(ht,ut,dt,!1,null,"65378bdb",null));pt.options.__file="About.vue";var _t=pt.exports;s["a"].use(y["a"]);var ft=new y["a"]({mode:"history",base:"/verkstad/",hash:!1,routes:[{path:"/",name:"home",component:N},{path:"/logbook",name:"logbook",component:G},{path:"/logdetails/:logId",name:"logdetails",component:Z,props:!0},{path:"/users",name:"users",component:ie},{path:"/signup",name:"signup",component:me},{path:"/login",name:"login",component:be},{path:"/machines",name:"machines",component:Te},{path:"/addeditmachine/:machineId",name:"addeditmachine",component:Pe,props:!0},{path:"/tasks",name:"tasks",component:Ue},{path:"/addedittask/:taskId",name:"addedittask",component:We,props:!0},{path:"/taskdetails/:taskId",name:"taskdetails",component:Ve,props:!0},{path:"/workonmachinetask/:mode/:machineTaskId",name:"workonmachinetask",component:st,props:!0},{path:"/machineqc/:machineId",name:"machineqc",component:lt,props:!0},{path:"/about",name:"about",component:_t},{path:"*",redirect:"/"}]}),vt=a("07a4");a("f9e3"),a("2dd8");s["a"].config.productionTip=!1,s["a"].use(n["a"]),Object(c["sync"])(vt["a"],ft),r["c"].add(i["c"]),r["c"].add(i["a"]),r["c"].add(i["b"]),r["c"].add(i["d"]),s["a"].component("font-awesome-icon",o["a"]),new s["a"]({router:ft,store:vt["a"],render:function(e){return e(w)}}).$mount("#app")},"60f7":function(e,t,a){},"61e1":function(e,t,a){},"64a9":function(e,t,a){},"7c31":function(e,t,a){},"8a6a":function(e,t,a){},9021:function(e,t,a){"use strict";var s=a("a7e8"),n=a.n(s);n.a},9659:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"bar"},[e.showBack?a("b-button",{staticClass:"btn-back",attrs:{to:{path:e.$store.state.route.from.fullPath}}},[a("font-awesome-icon",{attrs:{icon:"arrow-alt-circle-left"}})],1):e._e(),a("h1",[e._v(e._s(e.title))]),a("div",{staticClass:"date"},[e._v(e._s(e.today))])],1)},n=[],r=(a("28a5"),{name:"PageTitleBar",props:["title","showBack"],data:function(){return{today:null,days:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]}},created:function(){var e=new Date;this.today=[this.days[e.getDay()],e.toISOString().split("T")[0]].join(", ")}}),i=r,o=(a("2fcd"),a("2877")),c=Object(o["a"])(i,s,n,!1,null,"4622ff00",null);c.options.__file="PageTitleBar.vue";t["a"]=c.exports},a491:function(e,t,a){},a7e8:function(e,t,a){},a85a:function(module,__webpack_exports__,__webpack_require__){"use strict";var regenerator_runtime_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("96cf"),regenerator_runtime_runtime__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(regenerator_runtime_runtime__WEBPACK_IMPORTED_MODULE_0__),_Users_matthias_stahl_ki_jobs_mstodos_client_mstodos_node_modules_babel_runtime_corejs2_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("3b8d"),core_js_modules_es6_array_iterator__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("cadf"),core_js_modules_es6_array_iterator__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es6_array_iterator__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es6_promise__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("551c"),core_js_modules_es6_promise__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es6_promise__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es7_promise_finally__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("097d"),core_js_modules_es7_promise_finally__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es7_promise_finally__WEBPACK_IMPORTED_MODULE_4__),_PageTitleBar_vue__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("9659"),_services_MachineService__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("aeee"),_services_MachineQCService__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("dda9");__webpack_exports__["a"]={name:"MachineQC",components:{PageTitleBar:_PageTitleBar_vue__WEBPACK_IMPORTED_MODULE_5__["a"]},props:["machineId"],data:function(){return{message:null,machine:null,plots:{},plotsLoaded:!1}},created:function(){var e=Object(_Users_matthias_stahl_ki_jobs_mstodos_client_mstodos_node_modules_babel_runtime_corejs2_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_services_MachineService__WEBPACK_IMPORTED_MODULE_6__["a"].machine(this.machineId);case 3:this.machine=e.sent.data,0===this.machine.length?this.message="There are no machines.":this.machine.kanteleId?this.loadPlots():this.message="You have not provided a Kantele ID. No QC data can be fetched.",e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),e.t0.response?this.message=e.t0.response.data.error:this.message="No connection to the server. Please contact an admin.";case 10:case"end":return e.stop()}},e,this,[[0,7]])}));function t(){return e.apply(this,arguments)}return t}(),methods:{loadPlots:function(){var _loadPlots=Object(_Users_matthias_stahl_ki_jobs_mstodos_client_mstodos_node_modules_babel_runtime_corejs2_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__["a"])(regeneratorRuntime.mark(function _callee2(){return regeneratorRuntime.wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _context2.prev=0,_context2.next=3,_services_MachineQCService__WEBPACK_IMPORTED_MODULE_7__["a"].getQCPlots(this.machine.kanteleId);case 3:this.plots=_context2.sent.data,console.log(this.plots),eval(this.plots.bokeh_code.script),this.plotsLoaded=!0,this.message=null,_context2.next=13;break;case 10:_context2.prev=10,_context2.t0=_context2["catch"](0),_context2.t0.response?this.message=_context2.t0.response.data.error:this.message="No connection to the server. Please contact an admin.";case 13:case"end":return _context2.stop()}},_callee2,this,[[0,10]])}));function loadPlots(){return _loadPlots.apply(this,arguments)}return loadPlots}()}}},aeee:function(e,t,a){"use strict";var s=a("3f4a");t["a"]={add:function(e){return Object(s["a"])().post("/addmachine",e)},index:function(){return Object(s["a"])().get("/machines")},machine:function(e){return Object(s["a"])().get("/machine/".concat(e))},update:function(e){return Object(s["a"])().put("/updatemachine/".concat(e.id),e)},deleteMachine:function(e){return Object(s["a"])().delete("deletemachine/".concat(e))}}},c548:function(e,t,a){},ceda:function(e,t,a){"use strict";var s=a("06e8"),n=a.n(s);n.a},d31f:function(e,t,a){},dda9:function(e,t,a){"use strict";var s=a("bc3a"),n=s.create({baseURL:"https://mozzarella.scilifelab.se/dash"});t["a"]={getQCPlots:function(e){return n.get("/longqc/".concat(e))}}},eeae:function(e,t,a){"use strict";var s=a("c548"),n=a.n(s);n.a},ffba:function(e,t,a){"use strict";var s=a("61e1"),n=a.n(s);n.a}});
//# sourceMappingURL=app.903a45c7.js.map